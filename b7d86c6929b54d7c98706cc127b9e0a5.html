<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>e1bd76979ad84aea8b3bd71c4dffc661</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell markdown" id="_MggHacY_al6">
<p>#1.OVERVIEW The objective of this project is to use time series data
spanning from January 1, 2022, to the latest accessible production data,
which is two days ahead of the forecasted day, to provide hourly solar
power predictions for the Edikli solar power plant located in Niğde,
Turkey for the following day.</p>
<p>The auto.arima function in R will be used to generate an ARIMA model,
which will then be improved by modifying its parameters in this report.
After that, a time series linear regression model will also be
constructed. Following the construction of each model, we will compare
the models based on their WMAPEs and utilize the strongest model to
provide a prediction.</p>
</div>
<div class="cell markdown" id="dhm-qbJ5-NpY">
<p>#2.LITERATURE</p>
<p>The project relied on academic lectures, articles, and online
resources, including <a
href="https://www.datacamp.com/users/sign_in?redirect=http%3A%2F%2Fapp.datacamp.com%2F">DataCamp</a>
, to develop a comprehensive understanding of solar energy production
forecasting models. External variables for the model were determined
through literature research, with guidance from <a
href="https://www.emerald.com/insight/content/doi/10.1016/j.aci.2019.11.002/full/pdf?title=solar-power-generation-forecasting-using-ensemble-approach-based-on-deep-learning-and-statistical-methods">Mariam
AlKandari and Imtiaz Ahmad's work</a> on ensemble forecasting methods.
The study suggested incorporating irradiance, air temperature, and
precipitation data as inputs, employing linear regression within the
hybrid model.</p>
</div>
<div class="cell markdown" id="PT1DaGly-KKK">
<p>#3.PREPARATION OF DATA</p>
</div>
<section id="arranging-the-data" class="cell markdown"
id="sDIhmmUo-ZEJ">
<h3>Arranging the Data:</h3>
<p>For this project two datasets are used: one containing daily
production amounts and another containing regressors (cloud cover,
downward shortwave radiation (DSWRF), relative humidity, and temperature
data etc.) for 25 different locations. We converted the regressor
dataset from long format to wide format to facilitate merging with the
production data. Merged the regressor data with the production data
based on the date and time, ensuring all relevant columns (date, time,
production, and regressor values) are present.</p>
</section>
<div class="cell code" data-execution_count="1"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="nwciDpeUKc7w" data-outputId="2312d742-eb36-4cdd-ce69-3bb3554ecc21">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;RcppRoll&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;tidyr&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;lubridate&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;zoo&quot;</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;scales&quot;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;corrplot&quot;</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;ggcorrplot&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;GGally&quot;</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;forecast&quot;</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>install.packages(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

also installing the dependency ‘Rcpp’


Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

also installing the dependencies ‘plyr’, ‘reshape2’


Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

also installing the dependencies ‘labelled’, ‘broom.helpers’, ‘patchwork’, ‘ggstats’


Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

also installing the dependencies ‘xts’, ‘TTR’, ‘quadprog’, ‘quantmod’, ‘fracdiff’, ‘lmtest’, ‘timeDate’, ‘tseries’, ‘urca’, ‘RcppArmadillo’


Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)

</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="2"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="K57UlnsKKV7O" data-outputId="51a3c4aa-1a78-44a3-8e32-ee44bdf3f129">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>library(RcppRoll)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>library(tidyr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>library(readxl)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>library(lubridate)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>library(zoo)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>library(ggplot2)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>library(scales)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>library(data.table)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>library(corrplot)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>library(ggcorrplot)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>library(GGally)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>library(forecast)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>library(dplyr)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>
Attaching package: ‘lubridate’


The following objects are masked from ‘package:base’:

    date, intersect, setdiff, union



Attaching package: ‘zoo’


The following objects are masked from ‘package:base’:

    as.Date, as.Date.numeric



Attaching package: ‘data.table’


The following objects are masked from ‘package:zoo’:

    yearmon, yearqtr


The following objects are masked from ‘package:lubridate’:

    hour, isoweek, mday, minute, month, quarter, second, wday, week,
    yday, year


corrplot 0.92 loaded

Registered S3 method overwritten by &#39;GGally&#39;:
  method from   
  +.gg   ggplot2

Registered S3 method overwritten by &#39;quantmod&#39;:
  method            from
  as.zoo.data.frame zoo 


Attaching package: ‘dplyr’


The following objects are masked from ‘package:data.table’:

    between, first, last


The following objects are masked from ‘package:stats’:

    filter, lag


The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union


</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="3"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:405}"
id="xYV9gtpQNnsd" data-outputId="00937230-7699-4941-bf0d-7b1c64a9c1f5">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read Data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>weather_data <span class="op">&lt;-</span> fread(<span class="st">&quot;weather_data.csv&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#tail(Regressor_Data,n=50)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>weather_data <span class="op">&lt;-</span> data.table(weather_data)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Hour into a pretty format</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>weather_data$hour <span class="op">&lt;-</span>sprintf(<span class="st">&quot;</span><span class="sc">%02d</span><span class="st">:00&quot;</span>,weather_data$hour)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>head(weather_data)</span></code></pre></div>
<div class="output display_data">
<table class="dataframe">
<caption>A data.table: 6 × 14</caption>
<thead>
	<tr><th scope=col>date</th><th scope=col>hour</th><th scope=col>lat</th><th scope=col>lon</th><th scope=col>DSWRF_surface</th><th scope=col>TCDC_low.cloud.layer</th><th scope=col>TCDC_middle.cloud.layer</th><th scope=col>TCDC_high.cloud.layer</th><th scope=col>TCDC_entire.atmosphere</th><th scope=col>USWRF_top_of_atmosphere</th><th scope=col>CSNOW_surface</th><th scope=col>DLWRF_surface</th><th scope=col>USWRF_surface</th><th scope=col>TMP_surface</th></tr>
	<tr><th scope=col>&lt;IDate&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2023-07-12</td><td>10:00</td><td>37.75</td><td>34.50</td><td>718.080</td><td> 0.0</td><td> 0.0</td><td>0</td><td> 0.0</td><td>200.624</td><td>0</td><td>310.008</td><td>166.848</td><td>306.700</td></tr>
	<tr><td>2022-10-25</td><td>14:00</td><td>37.75</td><td>34.75</td><td>608.080</td><td> 0.0</td><td> 0.0</td><td>0</td><td> 0.0</td><td>156.656</td><td>0</td><td>253.651</td><td>113.008</td><td>297.891</td></tr>
	<tr><td>2022-10-25</td><td>15:00</td><td>37.75</td><td>34.50</td><td>590.592</td><td> 0.0</td><td> 0.0</td><td>0</td><td> 0.0</td><td>180.432</td><td>0</td><td>271.926</td><td>138.624</td><td>298.600</td></tr>
	<tr><td>2022-06-23</td><td>02:00</td><td>37.75</td><td>34.75</td><td>  0.000</td><td> 9.7</td><td>13.9</td><td>0</td><td>17.9</td><td>  0.000</td><td>0</td><td>313.849</td><td>  0.000</td><td>285.300</td></tr>
	<tr><td>2022-06-26</td><td>03:00</td><td>37.75</td><td>34.50</td><td>  0.000</td><td>50.6</td><td>42.4</td><td>0</td><td>52.0</td><td>  0.000</td><td>0</td><td>336.624</td><td>  0.000</td><td>286.600</td></tr>
	<tr><td>2022-08-20</td><td>09:00</td><td>37.75</td><td>34.75</td><td>120.464</td><td> 0.0</td><td> 0.0</td><td>0</td><td> 0.0</td><td> 48.256</td><td>0</td><td>307.766</td><td> 29.288</td><td>303.139</td></tr>
</tbody>
</table>

</div>
</div>
<div class="cell code" data-execution_count="10"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:283}"
id="-2XKD3-UOVMB" data-outputId="2346e551-fee6-4029-d414-8af63aa7a38d">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read production data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>production_data <span class="op">&lt;-</span> fread(<span class="st">&quot;production_data.csv&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>production_data <span class="op">&lt;-</span> data.table(production_data)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert hour into a pretty format</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>production_data$hour <span class="op">&lt;-</span>sprintf(<span class="st">&quot;</span><span class="sc">%02d</span><span class="st">:00&quot;</span>,production_data$hour)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># If necessary</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># production_data$date &lt;- dmy(production_data$date)</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>head(production_data)</span></code></pre></div>
<div class="output display_data">
<table class="dataframe">
<caption>A data.table: 6 × 3</caption>
<thead>
	<tr><th scope=col>date</th><th scope=col>hour</th><th scope=col>production</th></tr>
	<tr><th scope=col>&lt;IDate&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2022-01-01</td><td>00:00</td><td>0</td></tr>
	<tr><td>2022-01-01</td><td>01:00</td><td>0</td></tr>
	<tr><td>2022-01-01</td><td>02:00</td><td>0</td></tr>
	<tr><td>2022-01-01</td><td>03:00</td><td>0</td></tr>
	<tr><td>2022-01-01</td><td>04:00</td><td>0</td></tr>
	<tr><td>2022-01-01</td><td>05:00</td><td>0</td></tr>
</tbody>
</table>

</div>
</div>
<div class="cell markdown" id="zt4OJg4o_JRV">
<p>###Filling Missing Data:</p>
<p>To handle missing data, we completely removed any records with
missing values from the dataset to ensure the models do not encounter NA
values during training or prediction.</p>
<p>###Adding Dates:</p>
<p>Added index and date columns for unique identification and temporal
analysis.</p>
</div>
<div class="cell code" data-execution_count="18" id="E-eFGnchTkXj">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge datas (join them on date, hour)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>all_data <span class="op">&lt;-</span> merge(weather_data, production_data, by <span class="op">=</span> c(<span class="st">&quot;date&quot;</span>,<span class="st">&quot;hour&quot;</span>),<span class="bu">all</span><span class="op">=</span>T )</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Row indexes</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>all_data$row_number <span class="op">=</span> <span class="dv">1</span>:nrow(all_data)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>row_numbers_with_na_production_table<span class="op">=</span>all_data[<span class="kw">is</span>.na(all_data$production),<span class="st">&quot;row_number&quot;</span>]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># row_numbers_with_na_production_table</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>row_numbers_with_na_production <span class="op">=</span> row_numbers_with_na_production_table[[<span class="st">&quot;row_number&quot;</span>]]</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 506704</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>n_of_rows_has_na <span class="op">&lt;-</span> length(row_numbers_with_na_production)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>all_data_copied <span class="op">&lt;-</span> all_data</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Get rid of last days data with NA production</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>all_data <span class="op">&lt;-</span> all_data[<span class="dv">1</span>:(nrow(all_data)<span class="op">-</span>n_of_rows_has_na),]</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare tomorrow data for regression</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>last_day <span class="op">&lt;-</span> all_data_copied[nrow(all_data)<span class="op">-</span><span class="dv">2</span>]$date</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>tomorrow_day <span class="op">&lt;-</span> last_day</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>day(tomorrow_day) <span class="op">&lt;-</span> day(last_day) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>tomorrow_all_data <span class="op">&lt;-</span> all_data_copied[all_data_copied$date<span class="op">==</span>tomorrow_day]</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Get rid of first rows with NA locations</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>row_numbers_with_na_lat_lon_table<span class="op">=</span>all_data[<span class="kw">is</span>.na(all_data$lon),<span class="st">&quot;row_number&quot;</span>]</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>row_numbers_with_na_lat_lon <span class="op">&lt;-</span> row_numbers_with_na_lat_lon_table[[<span class="st">&quot;row_number&quot;</span>]]</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>all_data <span class="op">&lt;-</span> all_data[length(row_numbers_with_na_lat_lon):nrow(all_data), ]</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Reassign indexes</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>all_data$row_number <span class="op">=</span> <span class="dv">1</span>:nrow(all_data)</span></code></pre></div>
</div>
<div class="cell markdown" id="6EEI1klFALkR">
<p>###Deleting Hours with No Production:</p>
<p>Removed rows where production time falls between 7:00 p.m. and 4:00
a.m., as there is no significant production during these hours.</p>
</div>
<div class="cell code" data-execution_count="19" id="nB4MbeAdBMg4">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We manually changed the hour param below.</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># hist(all_data[hour==&quot;18:00&quot;]$production,freq = FALSE,breaks = 100)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>hours_that_have_zero_production<span class="op">=</span>c(<span class="st">&quot;00:00&quot;</span>,<span class="st">&quot;01:00&quot;</span>,<span class="st">&quot;02:00&quot;</span>,<span class="st">&quot;03:00&quot;</span>,<span class="st">&quot;04:00&quot;</span>,<span class="st">&quot;23:00&quot;</span>,<span class="st">&quot;22:00&quot;</span>,<span class="st">&quot;21:00&quot;</span>,<span class="st">&quot;20:00&quot;</span>,<span class="st">&quot;19:00&quot;</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="op">&lt;-</span> all_data[ <span class="op">!</span> hour <span class="op">%</span><span class="kw">in</span><span class="op">%</span> hours_that_have_zero_production]</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert hour back to factor</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>filtered_data$hour <span class="op">&lt;-</span> <span class="im">as</span>.factor(filtered_data$hour)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="21" id="iDN93PcHMNTJ">
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>filtered_data[, datetime :<span class="op">=</span> <span class="im">as</span>.POSIXct(paste(date, hour), <span class="bu">format</span> <span class="op">=</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H&quot;</span>)]</span></code></pre></div>
</div>
<div class="cell markdown" id="p7tpX3w4lVIy">
<p>#Plotting the adjusted production data to observe</p>
</div>
<div class="cell code" data-execution_count="22"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:437}"
id="gEB7KpFFMOMm" data-outputId="050207a0-ceb2-491e-bfbd-acdd97ec4361">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting filtered_data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>ggplot(filtered_data, aes(x <span class="op">=</span> datetime, y <span class="op">=</span> production)) <span class="op">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  geom_line(color <span class="op">=</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  labs(title <span class="op">=</span> <span class="st">&quot;Production Data Over Time&quot;</span>, x <span class="op">=</span> <span class="st">&quot;Date and Hour&quot;</span>, y <span class="op">=</span> <span class="st">&quot;Production&quot;</span>) <span class="op">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  theme_minimal() <span class="op">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  theme(plot.title <span class="op">=</span> element_text(hjust <span class="op">=</span> <span class="fl">0.5</span>))</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/8917e08d0f219c44ed9bfabc4cf5b42c1834658c.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="40"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:437}"
id="p4BfL7mHM6QL" data-outputId="5112ed9a-3813-4476-889b-e35dcb186577">
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ggplot(filtered_data, aes(x <span class="op">=</span> datetime, y <span class="op">=</span> production)) <span class="op">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  geom_line(color <span class="op">=</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="op">~</span>hour, scales <span class="op">=</span> <span class="st">&quot;free_y&quot;</span>) <span class="op">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  ggtitle(<span class="st">&quot;Hourly Production Trend&quot;</span>) <span class="op">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  xlab(<span class="st">&quot;Time&quot;</span>) <span class="op">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  ylab(<span class="st">&quot;Production&quot;</span>)</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/e8b476aa2d945773594499bde89c8899342f1e3d.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="24"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:437}"
id="8tI8Y-4hM7Bj" data-outputId="a5bf70b1-8297-4018-f517-a33d0f513132">
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>daily_series<span class="op">=</span>filtered_data[,<span class="bu">list</span>(total<span class="op">=</span><span class="bu">sum</span>(production)),by<span class="op">=</span><span class="bu">list</span>(date)]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>ggplot(daily_series, aes(date,total, group<span class="op">=</span><span class="dv">1</span>)) <span class="op">+</span> geom_line() <span class="op">+</span>geom_point()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/d113d83ca65a4229d9215d92d01be80c9084e2f3.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="25"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="J3Idg6z_M_BI" data-outputId="483c9307-52ea-49e9-baaf-a1215d3a4008">
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>acf(daily_series$total)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>acf(filtered_data$production)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>pacf(daily_series$total)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>pacf(filtered_data$production)</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/f52cb6c723583349cd09b93f122c50e676493a81.png"
width="420" height="420" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/0f52e554cba30378b9724f6a0e0d55874bc5440c.png"
width="420" height="420" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/8e8dbb073afb80b6de0542176394d84b78bbd0ba.png"
width="420" height="420" /></p>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/054470a1034d905b7cb5d61b0ba4b67355a78a95.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell markdown" id="Ey6_F2ihl9Zg">
<p>#4.Model Creation Phase</p>
</div>
<div class="cell markdown" id="3eGbl0H3mdXu">
<p>###4.1 Model Created With auto.arima</p>
</div>
<div class="cell code" data-execution_count="41"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="ZeKcBm2nb5QC" data-outputId="f45afd24-6c9b-4d39-9973-f60dedbd85b4">
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#model1</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the datetime column containing date and hour information</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>filtered_data[, datetime :<span class="op">=</span> <span class="im">as</span>.POSIXct(paste(date, hour), <span class="bu">format</span> <span class="op">=</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H&quot;</span>)]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting filtered_data dataframe into a time series object</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>ts_data <span class="op">&lt;-</span> ts(filtered_data$production, frequency <span class="op">=</span> <span class="dv">24</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering the hours from 5 in the morning until 7 in the evening</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>filtered_ts_data <span class="op">&lt;-</span> window(ts_data, start <span class="op">=</span> c(<span class="dv">5</span>), end <span class="op">=</span> c(<span class="dv">19</span>))</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the model</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">&lt;-</span> auto.arima(filtered_ts_data)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Determining the last date</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>last_date <span class="op">&lt;-</span> tail(filtered_data$datetime, <span class="dv">1</span>)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Determining the dates to be forecasted (1 day ahead)</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>next_date <span class="op">&lt;-</span> last_date <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Making the forecast (only for the hours from 5 in the morning until 7 in the evening)</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>forecast_result <span class="op">&lt;-</span> forecast(model, h <span class="op">=</span> <span class="dv">15</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting the forecasted upper confidence interval (Hi 95) values as a single column</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>forecast_hi95 <span class="op">&lt;-</span> forecast_result$upper[, <span class="dv">2</span>]  <span class="co"># The second column corresponds to the 95% upper confidence interval</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing the forecasted upper confidence interval (Hi 95) values</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(forecast_hi95)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Time Series:
Start = c(19, 2) 
End = c(19, 16) 
Frequency = 24 
 [1] 3.662275 4.147196 4.507192 4.810683 5.079706 5.321131 5.543425 6.013487
 [9] 6.207818 6.391621 6.566441 6.733690 6.893903 7.047228 7.195973
</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="42"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:675}"
id="3ye5lhIGePqi" data-outputId="250dc51b-bcc8-48fc-b2f3-673c23035861">
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelin oluşturulması</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">&lt;-</span> auto.arima(ts_data)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Oluşturulan modelin özetini al</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>summary(model)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">&lt;-</span> residuals(model)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>ggAcf(residuals) <span class="op">+</span> ggtitle(<span class="st">&quot;ACF of the Residuals&quot;</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#acf(model$residuals)</span></span></code></pre></div>
<div class="output display_data">
<pre><code>Series: ts_data 
ARIMA(2,1,2)(0,0,1)[24] with drift 

Coefficients:
         ar1      ar2      ma1     ma2     sma1  drift
      1.7186  -0.8248  -1.6602  0.7887  -0.0358  0.000
s.e.  0.0192   0.0132   0.0176  0.0120   0.0051  0.006

sigma^2 = 1.167:  log likelihood = -65748.91
AIC=131511.8   AICc=131511.8   BIC=131572.7

Training set error measures:
                       ME     RMSE       MAE MPE MAPE       MASE         ACF1
Training set 1.203351e-05 1.080235 0.4491246 NaN  Inf 0.09644898 -0.008164315</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/2fd2e717b6e73d72dbf97c52262c331b03e467ef.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell markdown" id="f7S6xR1Jmj5b">
<p>###4.2 Improved ARIMA models</p>
</div>
<div class="cell markdown" id="_pyiO6EBmpYe">
<p>By adjusting p,d,q variables, we try to obtain better performing
models. In this section the specified p, d, and q values determine the
parameters of the ARIMA model. We aim to improve the model by using
different p, d, and q values from the initial model in order to reduce
the error. For this purpose, we developed models with 2 different
combinations of p, d, and q values.</p>
</div>
<div class="cell code" data-execution_count="43"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:675}"
id="zSmcOxVyh6hY" data-outputId="99b953f6-959b-480e-cccf-5739b5a6d8e0">
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#model2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Belirlenen p, d ve q değerleri</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">&lt;-</span> <span class="dv">5</span>  <span class="co"># AR(p) parametresi</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">&lt;-</span> <span class="dv">1</span>  <span class="co"># Differencing derecesi (trend&#39;in kaldırılma seviyesi)</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>q <span class="op">&lt;-</span> <span class="dv">3</span>  <span class="co"># MA(q) parametresi</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelin oluşturulması</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>custom_model <span class="op">&lt;-</span> arima(filtered_ts_data, order <span class="op">=</span> c(p, d, q))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Model özetinin görüntülenmesi</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>summary(custom_model)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>ggAcf(residuals(custom_model)) <span class="op">+</span> ggtitle(<span class="st">&quot;ACF of the Residuals&quot;</span>)</span></code></pre></div>
<div class="output display_data">
<pre><code>
Call:
arima(x = filtered_ts_data, order = c(p, d, q))

Coefficients:
         ar1     ar2      ar3      ar4      ar5      ma1     ma2     ma3
      0.0447  0.0007  -0.8607  -0.0758  -0.0239  -0.0586  0.0138  0.9449
s.e.  0.0620  0.0625   0.0490   0.0578   0.0591   0.0323  0.0349  0.0432

sigma^2 estimated as 0.3232:  log likelihood = -288.18,  aic = 594.37

Training set error measures:
                      ME      RMSE       MAE MPE MAPE     MASE         ACF1
Training set 0.008483131 0.5676687 0.2023189 NaN  Inf 1.557369 -0.001269791</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/83437a6d75bec58c939b6033c0f624d8b905a682.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="44"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:675}"
id="ty4d-akKgNbR" data-outputId="77862c85-ad62-4739-a89f-9158f1b0d9d2">
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#model3</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Belirlenen p, d ve q değerleri</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">&lt;-</span> <span class="dv">5</span>  <span class="co"># AR(p) parametresi</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">&lt;-</span> <span class="dv">1</span>  <span class="co"># Differencing derecesi (trend&#39;in kaldırılma seviyesi)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>q <span class="op">&lt;-</span> <span class="dv">2</span>  <span class="co"># MA(q) parametresi</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelin oluşturulması</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>custom_model <span class="op">&lt;-</span> arima(filtered_ts_data, order <span class="op">=</span> c(p, d, q))</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Model özetinin görüntülenmesi</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>summary(custom_model)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>ggAcf(residuals(custom_model)) <span class="op">+</span> ggtitle(<span class="st">&quot;ACF of the Residuals&quot;</span>)</span></code></pre></div>
<div class="output display_data">
<pre><code>
Call:
arima(x = filtered_ts_data, order = c(p, d, q))

Coefficients:
         ar1      ar2    ar3      ar4      ar5      ma1     ma2
      0.5681  -0.8922  0.000  -0.0012  -0.0880  -0.5864  0.9480
s.e.  0.0605   0.0698  0.079   0.0639   0.0569   0.0283  0.0347

sigma^2 estimated as 0.3216:  log likelihood = -286.75,  aic = 589.49

Training set error measures:
                      ME      RMSE       MAE MPE MAPE     MASE        ACF1
Training set 0.008065302 0.5662732 0.1978835 NaN  Inf 1.523227 -0.00123807</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/220bef48494b4df8ed91f4947b2d1ca2a92069c3.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell markdown" id="8SgfEYl3ns6I">
<p>#4.3 Final ARIMA Model</p>
</div>
<div class="cell markdown" id="3pWXyPXNsEmA">
<p>In this section of the report, we define ranges for p, d, and q. by
iterating through all combinations, attempting to fit an ARIMA model for
each. If fitting fails, it catches the error and moves on. For
successful fits, it calculates the WMAPE on the test data. The code
tracks the combination with the lowest WMAPE and stores it as the best
model.</p>
<p>Finally, the code fits the best ARIMA model on the entire dataset and
forecasts for the specified horizon.</p>
</div>
<div class="cell code" data-execution_count="35" id="h6Ycc_cftJFn">
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>hourly_averaged <span class="op">&lt;-</span> filtered_data[, .(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  mean_DSWRF_surface <span class="op">=</span> mean(DSWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_low.cloud.layer <span class="op">=</span> mean(TCDC_low.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_middle.cloud.layer <span class="op">=</span> mean(TCDC_middle.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_high.cloud.layer <span class="op">=</span> mean(TCDC_high.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_entire.atmosphere <span class="op">=</span> mean(TCDC_entire.atmosphere, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  mean_USWRF_top_of_atmosphere <span class="op">=</span> mean(USWRF_top_of_atmosphere, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  mean_CSNOW_surface <span class="op">=</span> mean(CSNOW_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  mean_DLWRF_surface <span class="op">=</span> mean(DLWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  mean_USWRF_surface <span class="op">=</span> mean(USWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  mean_TMP_surface <span class="op">=</span> mean(TMP_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  mean_production <span class="op">=</span> mean(production, na.rm <span class="op">=</span> FALSE)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>), by <span class="op">=</span> .(date, hour)]</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>hourly_averaged$row_number <span class="op">&lt;-</span> <span class="dv">1</span>:nrow(hourly_averaged)</span></code></pre></div>
</div>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:73}"
id="jiJY6HiuEpV_" data-outputId="03aee84a-b53d-472f-f50b-18e2947e46f0">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>number_of_rows <span class="op">&lt;-</span> length(hourly_averaged$row_number)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>training_data_number <span class="op">&lt;-</span> number_of_rows <span class="op">%/%</span> <span class="dv">100</span> <span class="op">*</span> <span class="dv">95</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>training_data <span class="op">&lt;-</span> hourly_averaged[<span class="dv">1</span>:training_data_number]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>test_data <span class="op">&lt;-</span> hourly_averaged[(training_data_number <span class="op">+</span> <span class="dv">1</span>): nrow(hourly_averaged)]</span></code></pre></div>
<div class="output error" data-ename="ERROR"
data-evalue="Error in UNDECLARED(): could not find function &quot;UNDECLARED&quot;
">
<pre><code>Error in UNDECLARED(): could not find function &quot;UNDECLARED&quot;
Traceback:

</code></pre>
</div>
</div>
<div class="cell code" id="3D9bwYFmNXSS">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># acf(training_data$mean_production)</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pacf(training_data$mean_production)</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>auto_created_params <span class="op">&lt;-</span> auto.arima(training_data$mean_production,<span class="bu">max</span>.p <span class="op">=</span> <span class="dv">20</span>,<span class="bu">max</span>.q <span class="op">=</span> <span class="dv">20</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>model_arima <span class="op">&lt;-</span> auto_created_params</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>accuracy(model_arima)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_arima)</span></code></pre></div>
</div>
<div class="cell code" id="8GW5mBhKOd4R">
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>model_fitted <span class="op">&lt;-</span> training_data$mean_production<span class="op">-</span>model_arima$residuals</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ts.plot(training_data$mean_production,xlab = &quot;Time&quot;, ylab = &quot;Production&quot;)</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># points(model_fitted, type = &quot;l&quot;, col = 2, lty = 2)</span></span></code></pre></div>
</div>
<div class="cell code" id="y_4UptzKOuvf">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>wmape<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>numerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>denumerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>summary(<span class="kw">is</span>.na(training_data$mean_production))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="kw">in</span> <span class="dv">1</span>:nrow(training_data)){</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  numerator<span class="op">&lt;-</span><span class="bu">abs</span>(training_data[i]$mean_production<span class="op">-</span>model_fitted[i])<span class="op">+</span>numerator</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  denumerator <span class="op">&lt;-</span> training_data[i]$mean_production <span class="op">+</span> denumerator</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>wmape <span class="op">&lt;-</span> numerator<span class="op">/</span>denumerator</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>wmape</span></code></pre></div>
</div>
<div class="cell code" data-collapsed="true" id="pD9NdiKsXI6s">
<div class="sourceCode" id="cb28"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>n_of_rows_in_test <span class="op">&lt;-</span> length(test_data$row_number)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>predicted <span class="op">&lt;-</span> forecast(model_arima, h <span class="op">=</span> n_of_rows_in_test)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>time_series <span class="op">&lt;-</span> predicted$mean</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>predicted</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>wmape<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>numerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>denumerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="kw">in</span> <span class="dv">1</span>:nrow(test_data)){</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  numerator<span class="op">&lt;-</span><span class="bu">abs</span>(test_data[i]$mean_production<span class="op">-</span>time_series[i])<span class="op">+</span>numerator</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  denumerator <span class="op">&lt;-</span> test_data[i]$mean_production <span class="op">+</span> denumerator</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>wmape <span class="op">&lt;-</span> numerator<span class="op">/</span>denumerator</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>wmape</span></code></pre></div>
</div>
<div class="cell code" id="E1Wl-ZImPGzv">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>wmape<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>numerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>denumerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>summary(<span class="kw">is</span>.na(test_data$mean_production))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="kw">in</span> <span class="dv">1</span>:nrow(test_data)){</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  numerator<span class="op">&lt;-</span><span class="bu">abs</span>(test_data[i]$mean_production<span class="op">-</span>model_fitted_test[i])<span class="op">+</span>numerator</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  denumerator <span class="op">&lt;-</span> test_data[i]$mean_production <span class="op">+</span> denumerator</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>wmape <span class="op">&lt;-</span> numerator<span class="op">/</span>denumerator</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>wmape</span></code></pre></div>
</div>
<div class="cell code" id="s9QeK3WgRtCK">
<div class="sourceCode" id="cb30"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>UNDECLARED()</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Do not run this block on every execution. Takes a lot time.</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>p_range <span class="op">&lt;-</span> <span class="dv">0</span>:<span class="dv">10</span>  <span class="co"># Autoregressive terms</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>d_range <span class="op">&lt;-</span> <span class="dv">0</span>:<span class="dv">4</span>  <span class="co"># Differencing order</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>q_range <span class="op">&lt;-</span> <span class="dv">0</span>:<span class="dv">6</span>  <span class="co"># Moving average terms</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>best_order <span class="op">&lt;-</span> c(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>lowest_wmape <span class="op">&lt;-</span> <span class="dv">100</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>wmape<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>numerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>denumerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="kw">in</span> <span class="dv">1</span>:nrow(test_data)){</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  numerator<span class="op">&lt;-</span><span class="bu">abs</span>(test_data[i]$mean_production<span class="op">-</span>time_series[i])<span class="op">+</span>numerator</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  denumerator <span class="op">&lt;-</span> test_data[i]$mean_production <span class="op">+</span> denumerator</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="kw">in</span> p_range) {</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (d <span class="kw">in</span> d_range) {</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (q <span class="kw">in</span> q_range) {</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>      order <span class="op">&lt;-</span> c(p, d, q)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>      temp_model <span class="op">&lt;-</span> tryCatch({</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>        arima(training_data$mean_production, order <span class="op">=</span> order)</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>      }, error <span class="op">=</span> function(e) {</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>        cat(sprintf(<span class="st">&quot;Error in fitting model with order (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">): </span><span class="sc">%s</span><span class="ch">\n</span><span class="st">&quot;</span>, p, d, q, e$message))</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(NULL)  <span class="co"># Return NULL if there&#39;s an error</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>       <span class="cf">if</span> (<span class="op">!</span><span class="kw">is</span>.null(temp_model)) {</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>        wmape<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>        numerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>        denumerator<span class="op">&lt;-</span><span class="dv">0</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>        predicted <span class="op">&lt;-</span> forecast(temp_model, h <span class="op">=</span> n_of_rows_in_test)$mean</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (i <span class="kw">in</span> <span class="dv">1</span>:nrow(test_data)){</span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>          numerator<span class="op">&lt;-</span><span class="bu">abs</span>(test_data[i]$mean_production<span class="op">-</span>predicted[i])<span class="op">+</span>numerator</span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>          denumerator <span class="op">&lt;-</span> test_data[i]$mean_production <span class="op">+</span> denumerator</span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>        wmape <span class="op">&lt;-</span> numerator<span class="op">/</span>denumerator</span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (wmape <span class="op">&lt;</span> lowest_wmape) {</span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>            best_order <span class="op">&lt;-</span> order</span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>            lowest_wmape <span class="op">&lt;-</span> wmape</span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>        cat(wmape)</span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>        cat(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>       }</span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>lowest_wmape</span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>best_order</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="34" id="kKY0UFSSTtFO">
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>all_data_to_train <span class="op">&lt;-</span> hourly_averaged</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Change order params</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>last_model_arima <span class="op">&lt;-</span> arima(all_data_to_train$mean_production, c(<span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">4</span>))</span></code></pre></div>
</div>
<div class="cell code"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:1000}"
id="KpBjtNd0m0vX" data-outputId="e8000934-08df-4828-9e23-98e4d706e4e8">
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>forecasted <span class="op">&lt;-</span> forecast(last_model_arima, h <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>forecasted</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>hourly_averaged</span></code></pre></div>
<div class="output display_data">
<pre><code>      Point Forecast       Lo 80     Hi 80       Lo 95     Hi 95
11705      0.7564187 -1.14879233  2.661630 -2.15735011  3.670187
11706      2.3494073 -0.07408427  4.772899 -1.35700323  6.055818
11707      4.1071939  1.48299791  6.731390  0.09383245  8.120555
11708      5.9939348  3.31149229  8.676377  1.89149299 10.096377
11709      7.4707084  4.77083023 10.170587  3.34160108 11.599816
11710      8.5838391  5.87823732 11.289441  4.44597827 12.721700
11711      8.8850132  6.17604568 11.593981  4.74200492 13.028021
11712      8.5919580  5.88056553 11.303350  4.44524106 12.738675
11713      7.4964712  4.78219669 10.210746  3.34534658 11.647596
11714      6.0760029  3.35848507  8.793521  1.91991802 10.232088
11715      4.3416270  1.61911247  7.064142  0.17790031  8.505354
11716      2.8985667  0.16935690  5.627777 -1.27539951  7.072533
11717      1.7647982 -0.97449256  4.504089 -2.42458552  5.954182
11718      1.4283362 -1.32338329  4.180056 -2.78005559  5.636728
11719      1.6889635 -1.07819341  4.456120 -2.54303782  5.920965
11720      2.7587870 -0.02387173  5.541446 -1.49692227  7.014496
11721      4.1591182  1.36123443  6.957002 -0.11987576  8.438112
11722      5.8762089  3.06633199  8.686086  1.57887301 10.173545
11723      7.3031643  4.48392744 10.122401  2.99151360 11.614815
11724      8.4209127  5.59589344 11.245932  4.10041855 12.741407
11725      8.7413619  5.91242907 11.570295  4.41488249 13.067841
11726      8.4646295  5.63344712 11.295812  4.13470972 12.794549
11727      7.3789588  4.54577694 10.212141  3.04598109 11.711936
11728      5.9630099  3.12793847  8.798081  1.62714230 10.298878
11729      4.2307855  1.39268820  7.068883 -0.10970978  8.571281
11730      2.7890080 -0.05338905  5.631405 -1.55806316  7.136079
11731      1.6568693 -1.19260246  4.506341 -2.70102171  6.014760
11732      1.3221912 -1.53639846  4.180781 -3.04964441  5.694027
11733      1.5849227 -1.28543352  4.455279 -2.80490834  5.974754
11734      2.6565427 -0.22571823  5.538804 -1.75149499  7.064580</code></pre>
</div>
<div class="output display_data">
<table class="dataframe">
<caption>A data.table: 11704 × 14</caption>
<thead>
	<tr><th scope=col>date</th><th scope=col>hour</th><th scope=col>mean_DSWRF_surface</th><th scope=col>mean_TCDC_low.cloud.layer</th><th scope=col>mean_TCDC_middle.cloud.layer</th><th scope=col>mean_TCDC_high.cloud.layer</th><th scope=col>mean_TCDC_entire.atmosphere</th><th scope=col>mean_USWRF_top_of_atmosphere</th><th scope=col>mean_CSNOW_surface</th><th scope=col>mean_DLWRF_surface</th><th scope=col>mean_USWRF_surface</th><th scope=col>mean_TMP_surface</th><th scope=col>mean_production</th><th scope=col>row_number</th></tr>
	<tr><th scope=col>&lt;date&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2022-01-01</td><td>05:00</td><td>  0.0000</td><td> 2.784</td><td> 4.324</td><td>10.636</td><td> 19.272</td><td>  0.00000</td><td>0.00</td><td>227.7740</td><td>  0.00000</td><td>269.1040</td><td>0.00</td><td> 1</td></tr>
	<tr><td>2022-01-01</td><td>06:00</td><td>  0.0000</td><td> 2.964</td><td> 5.372</td><td>11.688</td><td> 21.772</td><td>  0.00000</td><td>0.00</td><td>227.7640</td><td>  0.00000</td><td>269.0350</td><td>0.00</td><td> 2</td></tr>
	<tr><td>2022-01-01</td><td>07:00</td><td>  0.0000</td><td> 3.284</td><td> 9.212</td><td>20.736</td><td> 31.992</td><td>  0.00000</td><td>0.00</td><td>228.1960</td><td>  0.00000</td><td>269.0010</td><td>0.00</td><td> 3</td></tr>
	<tr><td>2022-01-01</td><td>08:00</td><td>  0.0000</td><td> 3.672</td><td>11.252</td><td>26.432</td><td> 38.376</td><td>  0.00000</td><td>0.00</td><td>228.6570</td><td>  0.00000</td><td>269.0020</td><td>3.40</td><td> 4</td></tr>
	<tr><td>2022-01-01</td><td>09:00</td><td>  7.3688</td><td> 4.120</td><td>10.880</td><td>35.088</td><td> 45.856</td><td>  8.96704</td><td>0.00</td><td>229.4160</td><td>  2.41280</td><td>271.6340</td><td>6.80</td><td> 5</td></tr>
	<tr><td>2022-01-01</td><td>10:00</td><td>180.1384</td><td> 4.180</td><td>13.748</td><td>80.764</td><td> 85.364</td><td>135.20448</td><td>0.00</td><td>237.2910</td><td> 59.18848</td><td>275.7860</td><td>9.38</td><td> 6</td></tr>
	<tr><td>2022-01-01</td><td>11:00</td><td>254.7928</td><td> 3.972</td><td>16.520</td><td>69.392</td><td> 75.468</td><td>152.98944</td><td>0.00</td><td>237.3870</td><td> 82.53120</td><td>278.5530</td><td>7.65</td><td> 7</td></tr>
	<tr><td>2022-01-01</td><td>12:00</td><td>312.5520</td><td> 4.408</td><td>23.468</td><td>60.516</td><td> 70.368</td><td>167.55392</td><td>0.00</td><td>238.3870</td><td> 99.73056</td><td>280.2150</td><td>6.80</td><td> 8</td></tr>
	<tr><td>2022-01-01</td><td>13:00</td><td>347.4144</td><td> 5.348</td><td>32.996</td><td>54.852</td><td> 70.452</td><td>180.69312</td><td>0.00</td><td>240.8870</td><td>109.43168</td><td>280.6090</td><td>5.10</td><td> 9</td></tr>
	<tr><td>2022-01-01</td><td>14:00</td><td>364.6544</td><td> 6.772</td><td>39.460</td><td>45.880</td><td> 71.136</td><td>187.03872</td><td>0.00</td><td>243.0150</td><td>113.51040</td><td>280.2770</td><td>5.10</td><td>10</td></tr>
	<tr><td>2022-01-01</td><td>15:00</td><td>362.2984</td><td> 9.116</td><td>43.452</td><td>39.864</td><td> 71.612</td><td>188.88640</td><td>0.00</td><td>245.2960</td><td>112.10304</td><td>279.1650</td><td>1.70</td><td>11</td></tr>
	<tr><td>2022-01-01</td><td>16:00</td><td>221.4584</td><td>37.100</td><td>82.296</td><td>12.680</td><td> 89.116</td><td>168.56448</td><td>0.00</td><td>260.7560</td><td> 66.06976</td><td>277.0590</td><td>0.00</td><td>12</td></tr>
	<tr><td>2022-01-01</td><td>17:00</td><td>157.6448</td><td>37.032</td><td>78.252</td><td>17.376</td><td> 85.688</td><td>133.18080</td><td>0.00</td><td>258.9600</td><td> 47.22432</td><td>273.4670</td><td>0.00</td><td>13</td></tr>
	<tr><td>2022-01-01</td><td>18:00</td><td>107.3080</td><td>35.876</td><td>74.752</td><td>27.016</td><td> 83.300</td><td> 92.25216</td><td>0.00</td><td>257.2560</td><td> 32.11968</td><td>271.6590</td><td>0.00</td><td>14</td></tr>
	<tr><td>2022-01-02</td><td>05:00</td><td>  0.0000</td><td>92.820</td><td>88.048</td><td>99.388</td><td>100.000</td><td>  0.00000</td><td>0.60</td><td>311.7720</td><td>  0.00000</td><td>273.5370</td><td>0.00</td><td>15</td></tr>
	<tr><td>2022-01-02</td><td>06:00</td><td>  0.0000</td><td>93.304</td><td>89.960</td><td>99.588</td><td>100.000</td><td>  0.00000</td><td>0.68</td><td>312.2060</td><td>  0.00000</td><td>273.7100</td><td>0.00</td><td>16</td></tr>
	<tr><td>2022-01-02</td><td>07:00</td><td>  0.0000</td><td>93.492</td><td>91.856</td><td>99.696</td><td>100.000</td><td>  0.00000</td><td>0.64</td><td>312.9950</td><td>  0.00000</td><td>273.8370</td><td>0.00</td><td>17</td></tr>
	<tr><td>2022-01-02</td><td>08:00</td><td>  0.0000</td><td>93.520</td><td>93.408</td><td>99.756</td><td>100.000</td><td>  0.00000</td><td>0.64</td><td>313.6920</td><td>  0.00000</td><td>273.8850</td><td>0.00</td><td>18</td></tr>
	<tr><td>2022-01-02</td><td>09:00</td><td>  1.1968</td><td>93.872</td><td>94.488</td><td>99.656</td><td>100.000</td><td> 13.37856</td><td>0.64</td><td>314.2307</td><td>  0.53568</td><td>274.2630</td><td>0.85</td><td>19</td></tr>
	<tr><td>2022-01-02</td><td>10:00</td><td> 26.2784</td><td>97.128</td><td>98.128</td><td>94.464</td><td>100.000</td><td>232.89360</td><td>0.68</td><td>317.2720</td><td> 11.94816</td><td>274.4530</td><td>0.85</td><td>20</td></tr>
	<tr><td>2022-01-02</td><td>11:00</td><td> 37.0608</td><td>97.924</td><td>97.400</td><td>74.404</td><td> 99.948</td><td>286.67648</td><td>0.72</td><td>317.9830</td><td> 16.81472</td><td>274.6460</td><td>0.85</td><td>21</td></tr>
	<tr><td>2022-01-02</td><td>12:00</td><td> 46.2992</td><td>97.724</td><td>91.184</td><td>64.628</td><td> 99.324</td><td>327.99040</td><td>0.68</td><td>318.2250</td><td> 20.73024</td><td>274.8560</td><td>1.70</td><td>22</td></tr>
	<tr><td>2022-01-02</td><td>13:00</td><td> 61.1096</td><td>97.172</td><td>84.420</td><td>49.072</td><td> 98.604</td><td>350.97280</td><td>0.68</td><td>317.6840</td><td> 25.65248</td><td>275.4721</td><td>1.70</td><td>23</td></tr>
	<tr><td>2022-01-02</td><td>14:00</td><td> 82.7064</td><td>96.184</td><td>80.056</td><td>39.252</td><td> 97.536</td><td>354.57664</td><td>0.68</td><td>315.9097</td><td> 31.95392</td><td>276.2440</td><td>5.10</td><td>24</td></tr>
	<tr><td>2022-01-02</td><td>15:00</td><td>100.8448</td><td>94.664</td><td>72.196</td><td>32.720</td><td> 95.932</td><td>345.70880</td><td>0.72</td><td>312.7490</td><td> 37.98080</td><td>276.0630</td><td>0.85</td><td>25</td></tr>
	<tr><td>2022-01-02</td><td>16:00</td><td>180.0944</td><td>70.740</td><td>27.392</td><td> 0.000</td><td> 73.692</td><td>206.52864</td><td>0.72</td><td>275.8120</td><td> 67.22624</td><td>274.9940</td><td>0.00</td><td>26</td></tr>
	<tr><td>2022-01-02</td><td>17:00</td><td>137.5160</td><td>66.484</td><td>36.600</td><td> 0.000</td><td> 72.272</td><td>156.70464</td><td>0.76</td><td>262.8660</td><td> 52.67264</td><td>272.4760</td><td>0.00</td><td>27</td></tr>
	<tr><td>2022-01-02</td><td>18:00</td><td> 93.9880</td><td>61.472</td><td>31.576</td><td> 0.000</td><td> 66.436</td><td>108.21184</td><td>0.68</td><td>256.7430</td><td> 36.02560</td><td>270.8740</td><td>0.00</td><td>28</td></tr>
	<tr><td>2022-01-03</td><td>05:00</td><td>  0.0000</td><td> 9.660</td><td> 0.000</td><td> 0.276</td><td> 10.492</td><td>  0.00000</td><td>0.00</td><td>198.2010</td><td>  0.00000</td><td>266.2970</td><td>0.00</td><td>29</td></tr>
	<tr><td>2022-01-03</td><td>06:00</td><td>  0.0000</td><td> 9.296</td><td> 0.000</td><td> 0.284</td><td> 10.084</td><td>  0.00000</td><td>0.00</td><td>198.5360</td><td>  0.00000</td><td>266.1890</td><td>0.00</td><td>30</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>2024-04-13</td><td>17:00</td><td>219.96320</td><td>85.812</td><td>79.524</td><td> 0.080</td><td>95.540</td><td>430.65664</td><td>0</td><td>344.2920</td><td> 40.64704</td><td>286.958</td><td>0.30</td><td>11675</td></tr>
	<tr><td>2024-04-13</td><td>18:00</td><td>177.75840</td><td>85.200</td><td>78.964</td><td> 0.056</td><td>94.332</td><td>374.46336</td><td>0</td><td>342.5800</td><td> 33.34720</td><td>285.254</td><td>0.00</td><td>11676</td></tr>
	<tr><td>2024-04-14</td><td>05:00</td><td>  0.00000</td><td>47.048</td><td>26.400</td><td> 3.012</td><td>52.548</td><td>  0.00000</td><td>0</td><td>277.9170</td><td>  0.00000</td><td>278.642</td><td>0.38</td><td>11677</td></tr>
	<tr><td>2024-04-14</td><td>06:00</td><td>  0.00000</td><td>35.700</td><td>19.084</td><td> 3.732</td><td>42.084</td><td>  0.00000</td><td>0</td><td>271.7660</td><td>  0.00000</td><td>277.915</td><td>1.66</td><td>11678</td></tr>
	<tr><td>2024-04-14</td><td>07:00</td><td>  9.23072</td><td>30.284</td><td>14.636</td><td> 5.200</td><td>37.928</td><td>  8.70656</td><td>0</td><td>268.9580</td><td>  2.35200</td><td>279.760</td><td>5.00</td><td>11679</td></tr>
	<tr><td>2024-04-14</td><td>08:00</td><td> 49.23008</td><td>26.820</td><td>12.000</td><td> 9.696</td><td>38.696</td><td> 29.39456</td><td>0</td><td>268.1320</td><td> 11.99168</td><td>283.847</td><td>8.71</td><td>11680</td></tr>
	<tr><td>2024-04-14</td><td>09:00</td><td>107.68704</td><td>25.292</td><td>10.628</td><td>17.144</td><td>43.512</td><td> 52.66112</td><td>0</td><td>268.7880</td><td> 23.93792</td><td>287.856</td><td>9.78</td><td>11681</td></tr>
	<tr><td>2024-04-14</td><td>10:00</td><td>551.10400</td><td>30.352</td><td> 2.800</td><td>70.680</td><td>80.140</td><td>224.54528</td><td>0</td><td>283.7250</td><td>103.97696</td><td>290.876</td><td>9.55</td><td>11682</td></tr>
	<tr><td>2024-04-14</td><td>11:00</td><td>604.62000</td><td>37.148</td><td> 2.404</td><td>67.816</td><td>79.888</td><td>249.61216</td><td>0</td><td>289.3710</td><td>110.10112</td><td>292.817</td><td>7.21</td><td>11683</td></tr>
	<tr><td>2024-04-14</td><td>12:00</td><td>638.77840</td><td>41.556</td><td> 2.112</td><td>62.600</td><td>77.328</td><td>273.59360</td><td>0</td><td>293.8070</td><td>113.27872</td><td>293.673</td><td>7.88</td><td>11684</td></tr>
	<tr><td>2024-04-14</td><td>13:00</td><td>660.20400</td><td>44.460</td><td> 2.044</td><td>55.124</td><td>75.152</td><td>290.65792</td><td>0</td><td>296.9280</td><td>114.87680</td><td>294.097</td><td>6.40</td><td>11685</td></tr>
	<tr><td>2024-04-14</td><td>14:00</td><td>680.18000</td><td>45.604</td><td> 1.888</td><td>50.948</td><td>73.532</td><td>292.48576</td><td>0</td><td>298.3530</td><td>117.15968</td><td>294.916</td><td>3.14</td><td>11686</td></tr>
	<tr><td>2024-04-14</td><td>15:00</td><td>676.27200</td><td>46.988</td><td> 2.504</td><td>47.344</td><td>72.016</td><td>295.26720</td><td>0</td><td>299.5690</td><td>116.21184</td><td>293.288</td><td>3.67</td><td>11687</td></tr>
	<tr><td>2024-04-14</td><td>16:00</td><td>506.56960</td><td>62.460</td><td>16.588</td><td>36.620</td><td>75.268</td><td>305.13792</td><td>0</td><td>306.9570</td><td> 90.91200</td><td>290.807</td><td>3.24</td><td>11688</td></tr>
	<tr><td>2024-04-14</td><td>17:00</td><td>441.12080</td><td>66.080</td><td>23.848</td><td>36.900</td><td>78.524</td><td>276.65472</td><td>0</td><td>306.3430</td><td> 82.06592</td><td>288.689</td><td>0.71</td><td>11689</td></tr>
	<tr><td>2024-04-14</td><td>18:00</td><td>369.42320</td><td>62.856</td><td>28.796</td><td>31.004</td><td>74.816</td><td>241.99808</td><td>0</td><td>303.4830</td><td> 71.23136</td><td>286.115</td><td>0.03</td><td>11690</td></tr>
	<tr><td>2024-04-15</td><td>05:00</td><td>  0.00000</td><td> 0.040</td><td> 0.000</td><td> 0.052</td><td> 0.092</td><td>  0.00000</td><td>0</td><td>233.1330</td><td>  0.00000</td><td>275.744</td><td>0.26</td><td>11691</td></tr>
	<tr><td>2024-04-15</td><td>06:00</td><td>  0.00000</td><td> 0.036</td><td> 0.000</td><td> 0.036</td><td> 0.072</td><td>  0.00000</td><td>0</td><td>232.4370</td><td>  0.00000</td><td>275.313</td><td>2.35</td><td>11692</td></tr>
	<tr><td>2024-04-15</td><td>07:00</td><td> 11.21472</td><td> 0.024</td><td> 0.000</td><td> 0.024</td><td> 0.048</td><td>  9.04576</td><td>0</td><td>231.8920</td><td>  3.06048</td><td>277.650</td><td>6.07</td><td>11693</td></tr>
	<tr><td>2024-04-15</td><td>08:00</td><td> 57.18208</td><td> 0.020</td><td> 0.000</td><td> 0.032</td><td> 0.052</td><td> 28.24064</td><td>0</td><td>232.2160</td><td> 14.39744</td><td>282.568</td><td>9.07</td><td>11694</td></tr>
	<tr><td>2024-04-15</td><td>09:00</td><td>124.62208</td><td> 0.016</td><td> 0.000</td><td> 0.724</td><td> 0.780</td><td> 47.49120</td><td>0</td><td>233.1430</td><td> 28.29440</td><td>287.762</td><td>9.80</td><td>11695</td></tr>
	<tr><td>2024-04-15</td><td>10:00</td><td>662.72080</td><td> 0.184</td><td> 0.000</td><td> 3.760</td><td> 4.008</td><td>166.35328</td><td>0</td><td>243.4050</td><td>123.77152</td><td>292.300</td><td>9.84</td><td>11696</td></tr>
	<tr><td>2024-04-15</td><td>11:00</td><td>742.56560</td><td> 0.184</td><td> 0.000</td><td> 2.892</td><td> 3.120</td><td>172.73728</td><td>0</td><td>246.4760</td><td>131.94048</td><td>296.040</td><td>9.85</td><td>11697</td></tr>
	<tr><td>2024-04-15</td><td>12:00</td><td>804.19120</td><td> 0.124</td><td> 0.000</td><td> 2.772</td><td> 2.980</td><td>177.00096</td><td>0</td><td>249.4860</td><td>137.62560</td><td>298.576</td><td>9.85</td><td>11698</td></tr>
	<tr><td>2024-04-15</td><td>13:00</td><td>845.58800</td><td> 0.092</td><td> 0.000</td><td> 2.232</td><td> 2.396</td><td>179.58720</td><td>0</td><td>252.2650</td><td>141.18976</td><td>299.768</td><td>9.82</td><td>11699</td></tr>
	<tr><td>2024-04-15</td><td>14:00</td><td>865.67296</td><td> 0.076</td><td> 0.000</td><td> 1.808</td><td> 1.944</td><td>180.73280</td><td>0</td><td>254.7760</td><td>142.81216</td><td>299.905</td><td>9.69</td><td>11700</td></tr>
	<tr><td>2024-04-15</td><td>15:00</td><td>864.51712</td><td> 0.064</td><td> 0.000</td><td> 1.508</td><td> 1.616</td><td>180.49472</td><td>0</td><td>256.9000</td><td>142.54912</td><td>298.709</td><td>7.73</td><td>11701</td></tr>
	<tr><td>2024-04-15</td><td>16:00</td><td>714.68720</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td>168.08448</td><td>0</td><td>270.3160</td><td>126.81664</td><td>296.409</td><td>4.35</td><td>11702</td></tr>
	<tr><td>2024-04-15</td><td>17:00</td><td>620.46960</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td>158.64896</td><td>0</td><td>270.5160</td><td>115.64992</td><td>293.156</td><td>0.96</td><td>11703</td></tr>
	<tr><td>2024-04-15</td><td>18:00</td><td>517.43840</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td> 0.000</td><td>145.01952</td><td>0</td><td>270.2678</td><td>101.02272</td><td>289.243</td><td>0.04</td><td>11704</td></tr>
</tbody>
</table>

</div>
</div>
<div class="cell code" data-execution_count="45"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:760}"
id="MpepxbEL9XLm" data-outputId="6236f8ad-649f-4d2e-8737-7f60fed9a1e0">
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#model4</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Belirlenen p, d ve q değerleri</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">&lt;-</span> <span class="dv">7</span>  <span class="co"># AR(p) parametresi</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">&lt;-</span> <span class="dv">0</span>  <span class="co"># Differencing derecesi (trend&#39;in kaldırılma seviyesi)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>q <span class="op">&lt;-</span> <span class="dv">4</span>  <span class="co"># MA(q) parametresi</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelin oluşturulması</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>custom_model <span class="op">&lt;-</span> arima(filtered_ts_data, order <span class="op">=</span> c(p, d, q))</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Model özetinin görüntülenmesi</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>summary(custom_model)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>ggAcf(residuals(custom_model)) <span class="op">+</span> ggtitle(<span class="st">&quot;ACF of the Residuals&quot;</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>Warning message in arima(filtered_ts_data, order = c(p, d, q)):
“possible convergence problem: optim gave code = 1”
</code></pre>
</div>
<div class="output display_data">
<pre><code>
Call:
arima(x = filtered_ts_data, order = c(p, d, q))

Coefficients:
          ar1     ar2      ar3     ar4     ar5      ar6     ar7     ma1     ma2
      -0.3085  0.5588  -0.4737  0.3801  0.6839  -0.0702  0.0596  1.3319  0.7606
s.e.   0.1031  0.0752   0.0724  0.0783  0.1072   0.0628  0.0693  0.1029  0.0875
         ma3     ma4  intercept
      1.3038  0.8963     1.1097
s.e.  0.0788  0.0965     0.9543

sigma^2 estimated as 0.3075:  log likelihood = -281.86,  aic = 589.72

Training set error measures:
                     ME     RMSE       MAE MPE MAPE     MASE        ACF1
Training set 0.02122611 0.554567 0.2173374 NaN  Inf 1.672975 -0.02218249</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/802f7400f12a3f2082453238ec1dc96e8332ea13.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell markdown" id="pwgQ0vp6tucn">
<p>#4.4 Regression Model</p>
</div>
<div class="cell code" data-execution_count="47" id="XrztNofnC5DB">
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create regression formula</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>model_formula <span class="op">&lt;-</span> mean_production <span class="op">~</span> (mean_DSWRF_surface <span class="op">+</span> mean_TCDC_low.cloud.layer <span class="op">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_middle.cloud.layer <span class="op">+</span> mean_TCDC_high.cloud.layer <span class="op">+</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_entire.atmosphere <span class="op">+</span> mean_USWRF_top_of_atmosphere <span class="op">+</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  mean_CSNOW_surface <span class="op">+</span> mean_DLWRF_surface <span class="op">+</span> mean_USWRF_surface <span class="op">+</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  mean_TMP_surface <span class="op">+</span> hour)</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="48"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:789}"
id="IJQufOAXINXV" data-outputId="92600d3a-be85-4e8c-f487-fcc4b903247a">
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare last day data</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>tomorrow_all_data <span class="op">&lt;-</span> tomorrow_all_data[ <span class="op">!</span> hour <span class="op">%</span><span class="kw">in</span><span class="op">%</span> hours_that_have_zero_production]</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>tomorrow_all_data$hour <span class="op">&lt;-</span> <span class="im">as</span>.factor(tomorrow_all_data$hour)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>tomorrow_all_data[, datetime :<span class="op">=</span> <span class="im">as</span>.POSIXct(paste(date, hour), <span class="bu">format</span> <span class="op">=</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H&quot;</span>)]</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>tomorrow_hourly_averaged <span class="op">&lt;-</span> tomorrow_all_data[, .(</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  mean_DSWRF_surface <span class="op">=</span> mean(DSWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_low.cloud.layer <span class="op">=</span> mean(TCDC_low.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_middle.cloud.layer <span class="op">=</span> mean(TCDC_middle.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_high.cloud.layer <span class="op">=</span> mean(TCDC_high.cloud.layer, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  mean_TCDC_entire.atmosphere <span class="op">=</span> mean(TCDC_entire.atmosphere, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  mean_USWRF_top_of_atmosphere <span class="op">=</span> mean(USWRF_top_of_atmosphere, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  mean_CSNOW_surface <span class="op">=</span> mean(CSNOW_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>  mean_DLWRF_surface <span class="op">=</span> mean(DLWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  mean_USWRF_surface <span class="op">=</span> mean(USWRF_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  mean_TMP_surface <span class="op">=</span> mean(TMP_surface, na.rm <span class="op">=</span> TRUE),</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  mean_production <span class="op">=</span> mean(production, na.rm <span class="op">=</span> FALSE)</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>), by <span class="op">=</span> .(date, hour)]</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>tomorrow_hourly_averaged</span></code></pre></div>
<div class="output display_data">
<table class="dataframe">
<caption>A data.table: 14 × 13</caption>
<thead>
	<tr><th scope=col>date</th><th scope=col>hour</th><th scope=col>mean_DSWRF_surface</th><th scope=col>mean_TCDC_low.cloud.layer</th><th scope=col>mean_TCDC_middle.cloud.layer</th><th scope=col>mean_TCDC_high.cloud.layer</th><th scope=col>mean_TCDC_entire.atmosphere</th><th scope=col>mean_USWRF_top_of_atmosphere</th><th scope=col>mean_CSNOW_surface</th><th scope=col>mean_DLWRF_surface</th><th scope=col>mean_USWRF_surface</th><th scope=col>mean_TMP_surface</th><th scope=col>mean_production</th></tr>
	<tr><th scope=col>&lt;IDate&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2024-04-17</td><td>05:00</td><td>  0.000000</td><td>0</td><td>11.485714</td><td>97.17143</td><td>97.38571</td><td>  0.00000</td><td>0</td><td>277.5000</td><td>  0.000000</td><td>280.7549</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>06:00</td><td>  0.000000</td><td>0</td><td> 5.033333</td><td>98.70000</td><td>98.83333</td><td>  0.00000</td><td>0</td><td>280.6113</td><td>  0.000000</td><td>281.3040</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>07:00</td><td>  9.986667</td><td>0</td><td>20.766667</td><td>90.16667</td><td>90.46667</td><td> 11.97333</td><td>0</td><td>286.0390</td><td>  2.138667</td><td>284.5373</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>08:00</td><td> 52.925333</td><td>0</td><td> 9.466667</td><td>88.50000</td><td>91.68333</td><td> 35.34133</td><td>0</td><td>274.9723</td><td> 12.042667</td><td>288.1353</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>09:00</td><td>116.416000</td><td>0</td><td>25.133333</td><td>83.26667</td><td>88.83333</td><td> 55.81333</td><td>0</td><td>276.0277</td><td> 25.765333</td><td>293.1483</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>10:00</td><td>667.615000</td><td>0</td><td> 8.000000</td><td> 8.07500</td><td>15.00000</td><td>158.65600</td><td>0</td><td>268.1180</td><td>115.196000</td><td>297.1400</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>11:00</td><td>749.770000</td><td>0</td><td>10.100000</td><td> 7.40000</td><td>15.80000</td><td>182.04000</td><td>0</td><td>268.0120</td><td>144.368000</td><td>300.9420</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>12:00</td><td>813.280000</td><td>0</td><td> 3.466667</td><td> 7.70000</td><td>10.76667</td><td>158.62933</td><td>0</td><td>266.7453</td><td>117.685333</td><td>300.8753</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>13:00</td><td>839.190000</td><td>0</td><td>14.850000</td><td>17.55000</td><td>24.60000</td><td>193.88800</td><td>0</td><td>288.2560</td><td>153.760000</td><td>307.2960</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>14:00</td><td>848.773333</td><td>0</td><td>24.766667</td><td>39.10000</td><td>46.53333</td><td>189.45600</td><td>0</td><td>282.5333</td><td>137.269333</td><td>305.5630</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>15:00</td><td>854.843429</td><td>0</td><td>16.385714</td><td>22.81429</td><td>29.57143</td><td>180.41371</td><td>0</td><td>283.4257</td><td>133.949714</td><td>302.4393</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>16:00</td><td>713.646667</td><td>0</td><td> 0.000000</td><td>26.66667</td><td>28.20000</td><td>165.50667</td><td>0</td><td>291.4247</td><td>119.882667</td><td>299.0770</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>17:00</td><td>625.346667</td><td>0</td><td> 0.000000</td><td>22.13333</td><td>23.96667</td><td>158.83733</td><td>0</td><td>277.2333</td><td>111.706667</td><td>294.3197</td><td>NA</td></tr>
	<tr><td>2024-04-17</td><td>18:00</td><td>514.850000</td><td>0</td><td> 0.000000</td><td>29.62500</td><td>31.20000</td><td>140.21600</td><td>0</td><td>285.6250</td><td> 90.800000</td><td>290.8520</td><td>NA</td></tr>
</tbody>
</table>

</div>
</div>
<div class="cell code" data-execution_count="49"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:531}"
id="tZb6fuIBDuqN" data-outputId="3a47d36f-4116-4622-86c2-fa627b95d7df">
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Training model with hourly data up to today</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">&lt;-</span> lm(model_formula, data <span class="op">=</span> hourly_averaged)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Predicting tomorrow production</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>predictions <span class="op">&lt;-</span> predict(model, newdata <span class="op">=</span> tomorrow_hourly_averaged)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>results <span class="op">&lt;-</span> data.table(date <span class="op">=</span> tomorrow_hourly_averaged$date, hour <span class="op">=</span> tomorrow_hourly_averaged$hour, predicted_production <span class="op">=</span> predictions)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>results</span></code></pre></div>
<div class="output display_data">
<table class="dataframe">
<caption>A data.table: 14 × 3</caption>
<thead>
	<tr><th scope=col>date</th><th scope=col>hour</th><th scope=col>predicted_production</th></tr>
	<tr><th scope=col>&lt;IDate&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2024-04-17</td><td>05:00</td><td>0.2207087</td></tr>
	<tr><td>2024-04-17</td><td>06:00</td><td>0.7761340</td></tr>
	<tr><td>2024-04-17</td><td>07:00</td><td>3.1403203</td></tr>
	<tr><td>2024-04-17</td><td>08:00</td><td>6.2630389</td></tr>
	<tr><td>2024-04-17</td><td>09:00</td><td>8.2684167</td></tr>
	<tr><td>2024-04-17</td><td>10:00</td><td>9.5295900</td></tr>
	<tr><td>2024-04-17</td><td>11:00</td><td>9.8604825</td></tr>
	<tr><td>2024-04-17</td><td>12:00</td><td>9.2710980</td></tr>
	<tr><td>2024-04-17</td><td>13:00</td><td>9.3128192</td></tr>
	<tr><td>2024-04-17</td><td>14:00</td><td>8.0952936</td></tr>
	<tr><td>2024-04-17</td><td>15:00</td><td>6.1001520</td></tr>
	<tr><td>2024-04-17</td><td>16:00</td><td>3.8982272</td></tr>
	<tr><td>2024-04-17</td><td>17:00</td><td>2.5863786</td></tr>
	<tr><td>2024-04-17</td><td>18:00</td><td>1.4499694</td></tr>
</tbody>
</table>

</div>
</div>
<div class="cell code" data-execution_count="50"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:437}"
id="tivEaUuUOhS8" data-outputId="a39a1877-0712-4274-c2e7-a1b0b0e11558">
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot predicted values</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>results$hour <span class="op">&lt;-</span> <span class="im">as</span>.POSIXct(paste(results$date, results$hour), <span class="bu">format</span> <span class="op">=</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M&quot;</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>ggplot(results, aes(x <span class="op">=</span> hour, y <span class="op">=</span> predicted_production)) <span class="op">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  geom_line() <span class="op">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  geom_point() <span class="op">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  labs(title <span class="op">=</span> <span class="st">&quot;Predicted Production for Tomorrow (2024-01-01)&quot;</span>, x <span class="op">=</span> <span class="st">&quot;Hour&quot;</span>, y <span class="op">=</span> <span class="st">&quot;Predicted Production&quot;</span>) <span class="op">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  scale_x_datetime(date_breaks <span class="op">=</span> <span class="st">&quot;1 hour&quot;</span>, date_labels <span class="op">=</span> <span class="st">&quot;%H:%M&quot;</span>)</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/4738b7d4a295b22c68a33f3e4176b88c1f616643.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="51"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:437}"
id="kP7aebHnAJ9f" data-outputId="a9d633cd-bc7b-4c3b-b9d8-be1d3e93a1a0">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF ve PACF plotlarını çizmek için orijinal verilerden tahmin edilen değerlere kadar olan seriyi kullanabilirsiniz</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>actual_values <span class="op">&lt;-</span> hourly_averaged$mean_production</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>fitted_values <span class="op">&lt;-</span> predict(model, newdata <span class="op">=</span> hourly_averaged)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Eksik değerleri kaldırın</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>fitted_values <span class="op">&lt;-</span> na.omit(fitted_values)</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF ve PACF plotlarını oluşturun</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>par(mfrow <span class="op">=</span> c(<span class="dv">2</span>, <span class="dv">1</span>)) <span class="co"># ACF ve PACF plotlarını aynı anda çizmek için</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># ACF plotu</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>acf(fitted_values, main <span class="op">=</span> <span class="st">&quot;ACF of Fitted Values&quot;</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># PACF plotu</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>pacf(fitted_values, main <span class="op">=</span> <span class="st">&quot;PACF of Fitted Values&quot;</span>)</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>par(mfrow <span class="op">=</span> c(<span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># Tek bir plot penceresine geri dönün</span></span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_b7d86c6929b54d7c98706cc127b9e0a5/d0ecb73c2d14055e7896b79127cbeffd3fc90670.png"
width="420" height="420" /></p>
</div>
</div>
<div class="cell code" data-execution_count="52"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:714}"
id="D8kqdIl_CTgm" data-outputId="3536fec1-ec98-425a-8f2b-3e00d1bff63d">
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>summary(model)</span></code></pre></div>
<div class="output display_data">
<pre><code>
Call:
lm(formula = model_formula, data = hourly_averaged)

Residuals:
   Min     1Q Median     3Q    Max 
-9.130 -1.015  0.107  1.243  8.281 

Coefficients:
                               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  -3.920e+01  1.406e+00 -27.883  &lt; 2e-16 ***
mean_DSWRF_surface            3.672e-04  2.309e-04   1.590 0.111872    
mean_TCDC_low.cloud.layer     5.144e-03  1.336e-03   3.851 0.000118 ***
mean_TCDC_middle.cloud.layer -1.313e-03  9.215e-04  -1.424 0.154395    
mean_TCDC_high.cloud.layer    2.863e-03  1.020e-03   2.808 0.004989 ** 
mean_TCDC_entire.atmosphere  -7.125e-03  1.245e-03  -5.721 1.09e-08 ***
mean_USWRF_top_of_atmosphere  3.359e-03  3.616e-04   9.289  &lt; 2e-16 ***
mean_CSNOW_surface           -4.606e-01  1.187e-01  -3.880 0.000105 ***
mean_DLWRF_surface           -2.872e-02  1.306e-03 -21.984  &lt; 2e-16 ***
mean_USWRF_surface            4.491e-03  6.219e-04   7.221 5.51e-13 ***
mean_TMP_surface              1.703e-01  6.093e-03  27.955  &lt; 2e-16 ***
hour06:00                     5.487e-01  9.776e-02   5.613 2.04e-08 ***
hour07:00                     2.450e+00  9.875e-02  24.811  &lt; 2e-16 ***
hour08:00                     4.502e+00  1.016e-01  44.324  &lt; 2e-16 ***
hour09:00                     5.545e+00  1.103e-01  50.253  &lt; 2e-16 ***
hour10:00                     4.617e+00  1.351e-01  34.168  &lt; 2e-16 ***
hour11:00                     4.068e+00  1.443e-01  28.197  &lt; 2e-16 ***
hour12:00                     3.583e+00  1.513e-01  23.681  &lt; 2e-16 ***
hour13:00                     2.944e+00  1.551e-01  18.979  &lt; 2e-16 ***
hour14:00                     2.051e+00  1.553e-01  13.205  &lt; 2e-16 ***
hour15:00                     5.711e-01  1.535e-01   3.720 0.000200 ***
hour16:00                    -7.057e-01  1.396e-01  -5.055 4.37e-07 ***
hour17:00                    -1.540e+00  1.293e-01 -11.916  &lt; 2e-16 ***
hour18:00                    -1.618e+00  1.197e-01 -13.520  &lt; 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 1.922 on 10793 degrees of freedom
  (747 observations deleted due to missingness)
Multiple R-squared:  0.7611,	Adjusted R-squared:  0.7606 
F-statistic:  1495 on 23 and 10793 DF,  p-value: &lt; 2.2e-16
</code></pre>
</div>
</div>
<div class="cell markdown" id="tywoVVQjDOs9">
<p>#5. Model Evaluation</p>
</div>
<div class="cell markdown" id="r0nZIPlpDXW_">
<p>###5.1Comparing ARIMA models' results</p>
</div>
<div class="cell code" data-execution_count="54"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="rgo8QnVhC9mp" data-outputId="19cdb098-d51c-4e6b-b3d7-163ec783256a">
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Error measures for each model</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>model1 <span class="op">&lt;-</span> c(ME <span class="op">=</span> <span class="fl">1.203351e-05</span>, RMSE <span class="op">=</span> <span class="fl">1.080235</span>, MAE <span class="op">=</span> <span class="fl">0.4491246</span>, MASE <span class="op">=</span> <span class="fl">0.09644898</span>, ACF1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.008164315</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>model2 <span class="op">&lt;-</span> c(ME <span class="op">=</span> <span class="fl">0.008483131</span>, RMSE <span class="op">=</span> <span class="fl">0.5676687</span>, MAE <span class="op">=</span> <span class="fl">0.2023189</span>, MASE <span class="op">=</span> <span class="fl">1.557369</span>, ACF1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.001269791</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>model3 <span class="op">&lt;-</span> c(ME <span class="op">=</span> <span class="fl">0.008065302</span>, RMSE <span class="op">=</span> <span class="fl">0.5662732</span>, MAE <span class="op">=</span> <span class="fl">0.1978835</span>,  MASE <span class="op">=</span> <span class="fl">1.523227</span>, ACF1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.00123807</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>model4 <span class="op">&lt;-</span> c(ME <span class="op">=</span> <span class="fl">0.02122611</span>, RMSE <span class="op">=</span> <span class="fl">0.554567</span>, MAE <span class="op">=</span> <span class="fl">0.2173374</span>,  MASE <span class="op">=</span> <span class="fl">1.672975</span>, ACF1 <span class="op">=</span> <span class="op">-</span><span class="fl">0.02218249</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the models into a single data frame</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>error_measures <span class="op">&lt;-</span> data.frame(</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  Model <span class="op">=</span> c(<span class="st">&quot;Model 1&quot;</span>, <span class="st">&quot;Model 2&quot;</span>, <span class="st">&quot;Model 3&quot;</span>, <span class="st">&quot;Model 4&quot;</span>),</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  ME <span class="op">=</span> c(model1[<span class="st">&quot;ME&quot;</span>], model2[<span class="st">&quot;ME&quot;</span>], model3[<span class="st">&quot;ME&quot;</span>], model4[<span class="st">&quot;ME&quot;</span>]),</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  RMSE <span class="op">=</span> c(model1[<span class="st">&quot;RMSE&quot;</span>], model2[<span class="st">&quot;RMSE&quot;</span>], model3[<span class="st">&quot;RMSE&quot;</span>], model4[<span class="st">&quot;RMSE&quot;</span>]),</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  MAE <span class="op">=</span> c(model1[<span class="st">&quot;MAE&quot;</span>], model2[<span class="st">&quot;MAE&quot;</span>], model3[<span class="st">&quot;MAE&quot;</span>], model4[<span class="st">&quot;MAE&quot;</span>]),</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  MASE <span class="op">=</span> c(model1[<span class="st">&quot;MASE&quot;</span>], model2[<span class="st">&quot;MASE&quot;</span>], model3[<span class="st">&quot;MASE&quot;</span>], model4[<span class="st">&quot;MASE&quot;</span>]),</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  ACF1 <span class="op">=</span> c(model1[<span class="st">&quot;ACF1&quot;</span>], model2[<span class="st">&quot;ACF1&quot;</span>], model3[<span class="st">&quot;ACF1&quot;</span>], model4[<span class="st">&quot;ACF1&quot;</span>])</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the table</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(error_measures)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>    Model           ME      RMSE       MAE       MASE         ACF1
1 Model 1 1.203351e-05 1.0802350 0.4491246 0.09644898 -0.008164315
2 Model 2 8.483131e-03 0.5676687 0.2023189 1.55736900 -0.001269791
3 Model 3 8.065302e-03 0.5662732 0.1978835 1.52322700 -0.001238070
4 Model 4 2.122611e-02 0.5545670 0.2173374 1.67297500 -0.022182490
</code></pre>
</div>
</div>
<section id="52-interpretation-of-the-regression-model"
class="cell markdown" id="j1j8a1V1DgH7">
<h3>5.2 Interpretation of the Regression Model</h3>
</section>
<div class="cell markdown" id="c-mXoQvUDm2x">
<p>The regression analysis reveals several important metrics regarding
the model's performance. The residual standard error (RSE) is 1.922,
indicating the average deviation of the observed values from the
predicted values. With 747 observations removed due to missing data, the
analysis was conducted on 10,793 degrees of freedom. The model's
multiple R-squared value is 0.7611, suggesting that 76.11% of the
variance in the dependent variable is explained by the independent
variables. The adjusted R-squared is slightly lower at 0.7606,
accounting for the number of predictors used. p-value of less than
2.2e-16, strongly indicating that the model is statistically significant
and that the predictors collectively have a substantial impact on the
outcome variable.</p>
</div>
<div class="cell markdown" id="dXoEZtaeEHBW">
<p>#6. Conclusion</p>
</div>
<div class="cell markdown" id="zpspPQQbFq3V">
<p>In conclusion, this project utilized time series data to generate
hourly solar power predictions for the Edikli solar power plant in
Niğde, Turkey. By employing the auto.arima function in R, we developed
multiple ARIMA models and refined their parameters to enhance predictive
accuracy. Additionally, we constructed a time series linear regression
model for comparative analysis.</p>
<p>The performance of each model was rigorously evaluated using
different error measures. Our results demonstrated that the ARIMA
models, particularly the one selected for the competition phase,
provided robust and reliable predictions. The WMAPE values of our model
during competetion phase is as follows :</p>
</div>
<div class="cell code" data-execution_count="56"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;}"
id="9ZIaxLwUHeYB" data-outputId="bd12bbf2-ee63-465c-fc2b-ba9758ca8f90">
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">&lt;-</span> data.frame(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  Date <span class="op">=</span> c(<span class="st">&quot;12 May&quot;</span>, <span class="st">&quot;13 May&quot;</span>, <span class="st">&quot;14 May&quot;</span>, <span class="st">&quot;15 May&quot;</span>, <span class="st">&quot;16 May&quot;</span>, <span class="st">&quot;17 May&quot;</span>, <span class="st">&quot;18 May&quot;</span>, <span class="st">&quot;19 May&quot;</span>, <span class="st">&quot;20 May&quot;</span>, <span class="st">&quot;21 May&quot;</span>, <span class="st">&quot;22 May&quot;</span>, <span class="st">&quot;23 May&quot;</span>, <span class="st">&quot;24 May&quot;</span>, <span class="st">&quot;25 May&quot;</span>, <span class="st">&quot;26 May&quot;</span>),</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  WMAPE <span class="op">=</span> c(<span class="fl">0.2324574069</span>, <span class="fl">0.3174805559</span>, <span class="fl">0.2592977893</span>, <span class="fl">0.2570505288</span>, <span class="fl">0.2463983366</span>, <span class="fl">0.3131019037</span>, <span class="fl">0.4113453193</span>, <span class="fl">0.2431848404</span>, <span class="fl">0.3724116931</span>, <span class="fl">0.3275039746</span>, <span class="fl">0.2815664267</span>, <span class="fl">0.5980517816</span>, <span class="fl">0.7080111137</span>, <span class="fl">0.1526258206</span>, <span class="fl">0.5341558145</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the data frame</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>     Date     WMAPE
1  12 May 0.2324574
2  13 May 0.3174806
3  14 May 0.2592978
4  15 May 0.2570505
5  16 May 0.2463983
6  17 May 0.3131019
7  18 May 0.4113453
8  19 May 0.2431848
9  20 May 0.3724117
10 21 May 0.3275040
11 22 May 0.2815664
12 23 May 0.5980518
13 24 May 0.7080111
14 25 May 0.1526258
15 26 May 0.5341558
</code></pre>
</div>
</div>
<div class="cell markdown" id="4eF1lPozHqbW">
<p>It can be seen that there are fluctuations in WMAPE values so this
model is improvable</p>
</div>
</body>
</html>
